<script type="text/html" id="status-template" append-to='head'>
	<a href="/teams/">Teams</a>
	<!-- nko if: name -->
	<h1><span data-bind="text: name"></span>'s status</h1>
	<div data-bind="with: currentStatus">
		<p class="status" data-bind="visible: !$root.newMode()">
		Currently: 
		<span class="member-status callout border-callout">
			<span class="member-status-text" data-bind="text: description"></span>
			<span class="member-status-since">(For <span data-bind="text: since, attr : { title : done_on}"></span>.)</span>
		</span>
		</p>
	</div>
	<div data-bind="visible: $root.newMode, with: newStatus">
		<div>
			When: 
			<label for="when-now"><input id="when-now" type="radio" name="when" value="now" data-bind="checked: nowOrLater"/> Now</label>
			<label for="when-later"><input id="when-later" type="radio" name="when" value="later" data-bind="checked: nowOrLater"/> Later</label>
		</div>
		<div>
			<label for="description">
				Doing: 
				<textarea id="description" data-bind="value: description"></textarea>
			</label>
		</div>

		<button data-bind="click: $root.save">Post</button>
		<a href="#" data-bind="click: $root.cancelEdit">Nevermind</a>
	</div>
	<a href="#" data-bind="click: $root.create, visible: !$root.newMode()">New</a>

	<div id="#details">
		<div id="#next-statuses" data-bind="visible: nextStatuses().length">
			<h2>Next on the list</h2>
			<ul data-bind="foreach: nextStatuses">
				<li>
				<span class="member-status-text" data-bind="text: description"></span>
				<a href="#" data-bind="click : $root.makeCurrent">Work on this</a>
				</li>
			</ul>
		</div>
		<div id="#done-statuses" data-bind="visible: previousStatuses().length">
			<h2>Previously worked on</h2>
			<ul data-bind="foreach: previousStatuses">
				<li>
				<span class="member-status-text" data-bind="text: description"></span>
				<span class="member-status-since">(For <span data-bind="text: since, attr : { title : done_on}"></span> 
					starting on 
					<span data-bind="text: shortDate, attr : { title : started_on }"></span>)</span>
				</li>
			</ul>
		</div>
	</div> <!-- #details -->
	<!-- /nko -->
</script>

<div data-bind="template: { name: 'status-template'}" append-to='#content'></div>
